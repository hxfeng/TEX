var XWiki=(function(c){var a=c.widgets=c.widgets||{};if(!c.widgets.ModalPopup){if(console&&console.warn){console.warn("[JumpToPage widget] Required class missing: XWiki.widgets.ModalPopup")}}else{a.JumpToPage=Class.create(a.ModalPopup,{urlTemplate:"$xwiki.getURL('__space__.__document__', '__action__')",initialize:function($super){var e=new Element("div");this.input=new Element("input",{type:"text",id:"jmp_target",title:"$services.localization.render('core.viewers.jump.dialog.input.tooltip')"});e.appendChild(this.input);this.viewButton=this.createButton("button","$services.localization.render('core.viewers.jump.dialog.actions.view')","$services.localization.render('core.viewers.jump.dialog.actions.view.tooltip')","jmp_view");this.editButton=this.createButton("button","$services.localization.render('core.viewers.jump.dialog.actions.edit')","$services.localization.render('core.viewers.jump.dialog.actions.edit.tooltip')","jmp_edit");var d=new Element("div",{"class":"buttons"});d.appendChild(this.viewButton);d.appendChild(this.editButton);e.appendChild(d);$super(e,{show:{method:this.showDialog,keys:[$services.localization.render("core.viewers.jump.shortcuts")]},view:{method:this.openDocument,keys:[$services.localization.render("core.viewers.jump.dialog.actions.view.shortcuts")],options:{propagate:true}},edit:{method:this.openDocument,keys:[$services.localization.render("core.viewers.jump.dialog.actions.edit.shortcuts")]}},{title:"$services.localization.render('core.viewers.jump.dialog.content')",extraClassName:"jump-dialog",verticalPosition:"top"});this.shortcuts.close.options={propagate:true}},createDialog:function($super,d){Event.observe(this.viewButton,"click",this.openDocument.bindAsEventListener(this,"view"));Event.observe(this.editButton,"click",this.openDocument.bindAsEventListener(this,"edit"));$super(d);if(typeof(c.widgets.Suggest)!="undefined"){new c.widgets.Suggest(this.input,{
/*!#set ($restURL = "${request.contextPath}/rest/wikis/${xcontext.database}/search?scope=name&number=10&")*/
script:"$response.encodeURL($restURL)",varname:"q",noresults:"$services.localization.render('core.viewers.jump.suggest.noResults')",icon:"${xwiki.getSkinFile('icons/silk/page_white_text.png')}",json:true,resultsParameter:"searchResults",resultId:"id",resultValue:"pageFullName",resultInfo:"pageFullName",timeout:30000,parentContainer:this.dialogBox,propagateEventKeyCodes:[Event.KEY_RETURN]})}},showDialog:function($super){$super();this.input.value="";this.input.focus()},closeDialog:function($super,d){if(!d.type.startsWith("key")||!this.dialogBox.down(".ajaxsuggest")){$super();this.input.__x_suggest.clearSuggestions()}},openDocument:function(f,g){var h=this.dialogBox.down(".ajaxsuggest .xhighlight");if((!h||h.hasClassName("noSuggestion"))&&this.input.value!=""){Event.stop(f);var d=c.Model.resolve(this.input.value,c.EntityType.DOCUMENT);if(d&&d.type==c.EntityType.DOCUMENT){var e=new c.Document(d);window.self.location=e.getURL(g,"","")}else{if(typeof(c.widgets.Suggest)!="undefined"){new c.widgets.Notification("$services.localization.render('core.viewers.jump.dialog.invalidNameError')","error")}}}}});function b(){return new a.JumpToPage()}(c.domIsLoaded&&b())||document.observe("xwiki:dom:loaded",b)}return c}(XWiki||{}));