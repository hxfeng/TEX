require.config({paths:{JobRunner:"$!services.webjars.url('org.xwiki.platform:xwiki-platform-job-webjar', 'jobRunner.min')"}});require(["jquery","JobRunner"],function(d,b){var g=function(k,j){var i=Math.floor((j.progress.offset||0)*100);k.find(".ui-progress-bar").css("width",i+"%");var h=j.log.items||[];if(h.size()>0){k.find(".ui-progress-message").html(h[h.size()-1].renderedMessage)}};var f=function(k,j){var h=j.log.items||[];var i=k.find(".log");if(j.log.offset===0){i.html("")}i.find(".log-item-loading").removeClass("log-item-loading");d.each(h,function(l,m){var n=["log-item","log-item-"+m.level];if(j.state!=="FINISHED"&&l===h.size()-1){n.push("log-item-loading")}d(document.createElement("li")).addClass(n.join(" ")).html(m.renderedMessage).appendTo(i)})};var a=function(i){var h=d(this);g(h,i);f(h,i)};var c=function(i){var h=d(this);h.find(".ui-progress").replaceWith(i.message);f(h,i)};var e=function(){};d(".job-status").has(".ui-progress").each(function(){var j=d(this);var h=j.attr("data-url");if(h!==""){var i=j.find(".log");b({createStatusRequest:function(){return{url:h,data:{logOffset:i.find(".log-item").size()}}}}).resume().progress(d.proxy(a,this)).done(d.proxy(c,this)).fail(d.proxy(e,this))}})});