require(["jquery","xwiki-meta"],function(a,b){a(document).ready(function(){var f=a("#delete-progress-bar");var c=f.data("job-id");var e=b.restURL.substr(0,b.restURL.indexOf("/rest/"));var d=function(i){f.css("width",i*100+"%");f.data("progress",i)};var h=function(){d(1);a("#delete-progress-bar-container").hide();var i=e+"/rest/joblog/"+c;a.ajax(i,{data:{media:"json",level:"ERROR"}}).done(function(k){if(k.logEvents.length>0){var l="<ul>";for(var j=0;j<k.logEvents.length;++j){l+="<li>"+k.logEvents[j].formattedMessage+"</li>"}l+="</ul>";a("#errorMessage").append(l).removeClass("hidden")}else{a("#successMessage").removeClass("hidden")}})};var g=function(){var i=e+"/rest/jobstatus/"+c;a.ajax(i,{data:{media:"json"}}).done(function(j){if(j.progress.offset<1){d(j.progress.offset);setTimeout(g,1000)}else{h()}})};d(f.data("progress"));g()})});